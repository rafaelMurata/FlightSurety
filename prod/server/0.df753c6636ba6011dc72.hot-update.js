exports.id=0,exports.modules={"./src/server/server.js":function(e,o,n){"use strict";n.r(o);var s=n("./build/contracts/FlightSuretyApp.json"),t=n("./src/server/config.json"),r=n("web3"),a=n.n(r),c=n("express"),l=n.n(c),i=n("cors"),u=t.localhost,d=new a.a(new a.a.providers.WebsocketProvider(u.url.replace("http","ws")));d.eth.defaultAccount=d.eth.accounts[0];var f=new d.eth.Contract(s.abi,u.appAddress),g=[{id:0,name:"FLGT001"},{id:1,name:"FLGT002"},{id:2,name:"FLGT003"},{id:3,name:"KL1105"},{id:4,name:"KE6419"},{id:5,name:"KL1107"},{id:6,name:"9W8515"}];d.eth.getAccounts((function(e,o){var n=o[0];flightSuretyData.methods.authorizeCaller(u.appAddress).send({from:n},(function(e,o){e?console.log(e):console.log("Configured authorized caller: ".concat(u.appAddress))}));for(var s=function(e){f.methods.registerOracle().send({from:o[e],value:d.utils.toWei("1","ether"),gas:45e5},(function(n,s){n?console.log(n):f.methods.getMyIndexes().call({from:o[e]},(function(n,s){if(n)console.log(n);else{var t={address:o[e],index:s};console.log("Oracle: ".concat(JSON.stringify(t))),oracles.push(t)}}))}))},t=ORACLES_ACCOUNT_OFFSET;t<ORACLES_COUNT+ORACLES_ACCOUNT_OFFSET;t++)s(t)})),f.events.OracleRequest({fromBlock:0},(function(e,o){e?console.log(e):function(){for(var e=o.returnValues.index,n=o.returnValues.airline,s=o.returnValues.flight,t=o.returnValues.timestamp,r=STATUS_CODES[Math.floor(Math.random()*STATUS_CODES.length)],a=function(o){oracles[o].index.includes(e)&&f.methods.submitOracleResponse(e,n,s,t,r).send({from:oracles[o].address},(function(e,n){e?console.log(e):console.log("".concat(JSON.stringify(oracles[o]),": Status code ").concat(r))}))},c=0;c<oracles.length;c++)a(c)}()}));var h=l()();h.get("/api",(function(e,o){o.send({message:"An API for use with your Dapp!"}),h.get("/flights",(function(e,o){o.json({result:g})})),h.get("/eventIndex",(function(e,o){o.json({result:null})}))})),h.use(i()),o.default=h}};