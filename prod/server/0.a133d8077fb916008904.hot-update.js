exports.id=0,exports.modules={"./build/contracts/FlightSuretyData.json":function(e){e.exports=JSON.parse("{}")},"./src/server/server.js":function(e,t,n){"use strict";n.r(t);var o=n("./build/contracts/FlightSuretyApp.json"),s=(n("./build/contracts/FlightSuretyData.json"),n("./src/server/config.json")),r=n("web3"),a=n.n(r),c=n("express"),l=n.n(c),i=n("cors"),u=[],d=s.localhost,f=new a.a(new a.a.providers.WebsocketProvider(d.url.replace("http","ws")));f.eth.defaultAccount=f.eth.accounts[0];var g=new f.eth.Contract(o.abi,d.appAddress),h=[{id:0,name:"FLGT001"},{id:1,name:"FLGT002"},{id:2,name:"FLGT003"},{id:3,name:"KL1105"},{id:4,name:"KE6419"},{id:5,name:"KL1107"},{id:6,name:"9W8515"}],m=[0,10,20,30,40,50];f.eth.getAccounts((function(e,t){var n=t[0];flightSuretyData.methods.authorizeCaller(d.appAddress).send({from:n},(function(e,t){e?console.log(e):console.log("Configured authorized caller: ".concat(d.appAddress))}));for(var o=function(e){g.methods.registerOracle().send({from:t[e],value:f.utils.toWei("1","ether"),gas:45e5},(function(n,o){n?console.log(n):g.methods.getMyIndexes().call({from:t[e]},(function(n,o){if(n)console.log(n);else{var s={address:t[e],index:o};console.log("Oracle: ".concat(JSON.stringify(s))),u.push(s)}}))}))},s=20;s<40;s++)o(s)})),g.events.OracleRequest({fromBlock:0},(function(e,t){e?console.log(e):function(){for(var e=t.returnValues.index,n=t.returnValues.airline,o=t.returnValues.flight,s=t.returnValues.timestamp,r=m[Math.floor(Math.random()*m.length)],a=function(t){u[t].index.includes(e)&&g.methods.submitOracleResponse(e,n,o,s,r).send({from:u[t].address},(function(e,n){e?console.log(e):console.log("".concat(JSON.stringify(u[t]),": Status code ").concat(r))}))},c=0;c<u.length;c++)a(c)}()}));var p=l()();p.get("/api",(function(e,t){t.send({message:"An API for use with your Dapp!"}),p.get("/flights",(function(e,t){t.json({result:h})})),p.get("/eventIndex",(function(e,t){t.json({result:null})}))})),p.use(i()),t.default=p}};